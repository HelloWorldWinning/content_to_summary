Timestamp: 2025-10-23T08:08:35.180570
Title: 开源堡垒机部署项目 BV1y7shzBEAh
URL: https://b23.tv/PEW1xKD
Status: success
Duration: 32:51

Description:
好的，这是对所提供文本的提炼总结。

### **JumpServer 开源堡垒机部署与应用指南**

#### **一、 堡垒机（JumpServer）的核心价值**
*   **定义**：堡垒机，专业名称为安全审计系统，是一个用于集中管理和审计IT资产（如服务器）访问权限的控制平台。
*   **核心作用**：
    *   **统一入口**：所有运维人员必须通过堡垒机才能访问生产环境的服务器，杜绝直接连接，实现权限的集中管控。
    *   **安全审计**：详细记录所有通过堡垒机的操作，包括`谁 (Who)`、`什么时间 (When)`、`在哪台服务器 (Where)`、`执行了什么命令 (What)`。
    *   **操作回溯**：支持会话录像回放功能，可像看视频一样复盘整个操作过程，便于故障排查和安全事件追溯。
    *   **责任明确**：由于所有操作均被记录，有效防止了恶意操作或误操作后的抵赖行为，增强了操作的规范性和安全性。

#### **二、 JumpServer 部署准备与实施**
*   **环境准备**：
    *   准备一台干净的 Linux 服务器。
    *   **内存要求**：至少 4G（原文中 2G 内存部署失败）。
    *   **网络要求**：关闭防火墙或放行相应端口（默认为 80 端口），确保端口未被占用。
*   **部署步骤**：
    1.  从 JumpServer 官网下载最新的安装包。
    2.  解压安装包。
    3.  执行安装脚本 `./jmsctl.sh install`。
    4.  按照提示进行交互式配置（大部分可直接回车使用默认选项），脚本会自动安装 Docker 及相关依赖。
*   **启动与验证**：
    *   使用 `./jmsctl.sh start` 或 `restart` 启动服务。
    *   使用 `./jmsctl.sh status` 检查所有容器服务是否正常运行。
    *   部署成功后，系统会提示默认的访问地址、管理员账号（admin）和初始密码。

#### **三、 JumpServer 核心功能与管理**
1.  **资产管理**：
    *   **添加资产**：在“资产列表”中创建并添加需要管理的设备，如 Linux/Windows 服务器、网络设备、数据库等。
    *   **配置信息**：需填写资产的 IP 地址、名称、连接协议（如 SSH）以及用于登录的账户信息（如 root 账户的密码或密钥）。
    *   **连接测试**：添加后可进行连接性测试，确保堡垒机能成功纳管该资产。
2.  **用户与授权管理**：
    *   **用户创建**：在“用户列表”中为运维人员创建独立的普通用户账号，并可设置角色（如普通用户、审计员）。
    *   **资产授权**：在“资产授权”中创建规则，将**指定的用户**与**指定的资产**进行关联，从而实现权限的精细化控制。这是确保安全的核心步骤，即“授权某人可以访问某台设备”。
3.  **远程连接与操作**：
    *   普通用户登录后，只能看到被授权访问的资产列表。
    *   点击资产旁的连接按钮，即可通过 Web Terminal 直接在浏览器中打开服务器的命令行终端进行操作。
4.  **安全审计**：
    *   **会话记录**：在“审计台”中查看所有历史连接会话的详细信息。
    *   **命令记录**：精确查看每个会话中执行过的所有命令。
    *   **会话回放**：以视频录像的形式，完整回放用户的整个操作过程。

---
### **核心要点**
JumpServer 通过集中纳管资产、精细化授权和全程操作审计，为企业IT基础设施提供了安全、可控、合规的统一访问入口。

### **内容框架**
该内容遵循了“**为什么 → 怎么做 → 做什么**”的逻辑框架：
1.  **理论先行 (Why)**：首先阐述堡垒机的概念、必要性及其在安全审计中的核心价值。
2.  **实践部署 (How)**：接着提供了一套完整的、从环境准备到服务启动的 JumpServer 部署实操指南。
3.  **核心应用 (What)**：最后演示了 JumpServer 的三大核心应用场景——资产管理、用户授权和安全审计，展示了其在企业环境中的实际用途。

### **概念关系图**
<Mermaid_Diagram>
graph TD
    subgraph "JumpServer 堡垒机核心框架"
        A["用户/运维人员"] --> B{"JumpServer 平台"};
        
        subgraph "平台管理与配置"
            B --> C["1. 用户管理 (创建用户/角色)"];
            B --> D["2. 资产管理 (添加服务器/设备)"];
            B --> E["3. 资产授权 (关联用户与资产)"];
            C -- "为用户授权" --> E;
            D -- "授权访问资产" --> E;
        end

        subgraph "访问与操作"
            A -- "通过浏览器登录" --> B;
            B -- "发起安全连接 (Web Terminal)" --> F["目标资产 (服务器)"];
        end

        subgraph "安全审计"
            F -- "操作行为被记录" --> B;
            B --> G["会话审计中心"];
            G --> H["命令记录 (执行了什么)"];
            G --> I["会话回放 (如何操作的)"];
            J["审计员"] -- "审查日志" --> G;
        end
    end

    style A fill:#F9E79F,stroke:#333,stroke-width:2px
    style J fill:#F9E79F,stroke:#333,stroke-width:2px
    style B fill:#AED6F1,stroke:#2980B9,stroke-width:3px
    style C fill:#D5F5E3,stroke:#333,stroke-width:1px
    style D fill:#D5F5E3,stroke:#333,stroke-width:1px
    style E fill:#ABEBC6,stroke:#1D8348,stroke-width:2px
    style F fill:#FADBD8,stroke:#C0392B,stroke-width:2px
    style G fill:#E8DAEF,stroke:#8E44AD,stroke-width:2px
    style H fill:#FDEDEC,stroke:#333,stroke-width:1px
    style I fill:#FDEDEC,stroke:#333,stroke-width:1px
</Mermaid_Diagram>

Content:
今天讲一个比较简单的小项这个项目虽然简单,但是非常非常的实用这个项目就是保累机部署怎么去部署在我们本地去部署一个开源的保累机怎么去部署那么在部署之前我们先说一下什么是保累机它有什么作用首先保累机它专业名字来说它就是安全审计那么这个名字听起来非常抽象我们通俗来讲保累机它能做什么我们可以这样想我们平时在连接一些我们的一些Linux似的不客气啊对不对我在直接本地是不是直接就使用插线啊直接远程进行连接或者是使用密耀登录对不对但是大家想一下如果我们在生产环境上上千台服气我们这些运为小组包括一些其他的一些安全团队等等等等我们企业的内部人员那想用生产环境假如它能够用生产环境它如果直接就能连接那是不是非常危险危险在哪呢其实这个大家也可以能够想到谁登录过谁去访问的什么我们都不知道对不对我们都不知道它哪怕它把根删的我们恨我们的都不知道当然它们这个删根动灵非常大这个得知道就打个比方嘛对吧除非我们看夫妻日子这样的话太麻烦了对不对就像有恶意的黑crn进来我们都不知道对不对所以说这时候我们得需要一个能够关注我们去访问生产环境的一个东西这个东西叫做保磊基于有的保磊基于这个东西我们连接我们想去连接这个生产环境的爱的服气就不能直接够连接了直接连接是不可以的是没有权限的的我们必须得先登录保磊基这个帐号进入保磊基之后我们通过保磊基然后再登录我们的这个服气才能登录服气我们所在服气做的任何的操作这个保磊基它都能给我们做的纪录并且详细的纪录出那个用户什么时间这个在哪台服气做的什么样的操作什么样的命令等等它都能给我们显示出来所以说它能够清晰的纪录出纪录出谁访问我们服气我不让人直接连接我必须得通过保磊基就没人敢随便去操作因为我们保磊基全都记录的你做的任何任何事情都能够记录所以说这保磊基非常非常安全就祈祷一个安全审计的一个作用所以说大家要知道那么这个东西呢当然保磊基它有很多很多类型但是现在一般它都有一些商业我们企业都会用商业版本的一些保磊基它有硬件的还有软件的现在呢我们用硬件的片多硬件的保磊基对吧不属在我们网路里面然后我们去接到里面就可以硬件是居多比如说可以用一些安全厂商的对忙其安心等等这些它还有一些软件的软件的就一些开源的我们也可以使用比如加姆斯沃尔一些可能是这个非常小的企业它可能没有足够的材力买一些硬件的对吧知名的保磊基那我它只能够去使用一些开源的保磊基那个JumpServer对吧虽然它的功能叫少一点但是核心功能都能够实现那么今天我们就我就带大家来部署一下JumpServer这个保磊基JumpServer首先我们准备好一台利用ableS-FuC一个比较干净的专门放置保磊基的这个 FuC当然内存我们不能给它小我这里面是好像是两个两季的我这里面当然我们自己的环境对吧生产环境下我们更不用管因为会更大对吧首先不属之前我们先看一下我们防火强是否开启我们要保证完防火强关闭或者说我们最后不属完放行一下一些端口这样也可以也可以OK这里面我是关闭的状态那么现在我去找一找这个还要检查一下我们端口有没有被占用当然我们这个JumpServer专口不能人是80个端口我们不能有占用不能有80占专口的占用所以说这个地方我们要注意下一步我们就可以从网上JumpServer的官网去下载开源的保磊系其实我们直接一搜游行点击官网打开点面飞下载就可以点击一下就可以然后在这里我就不再下载了因为好像有点大我记得因为我这里面我的这个Linux里面已经传入了传入了一个保磊系下载完了之后就这样了是一个安装包JumpServer它的版本这里面是4.94.1.0现在也可以用了这个我就不再下载了因为都是差不多了那我们直接就来到不属的阶段其实它不属非常非常简单因为都给我们写好了我们可以把它放在某一个目录里讲压到比如说我在这里面解压到我的APPTools里面好像没有APPTools我们看一下APPToolsOK我们解压一下它稍微有点大这个保磊系OK解压完了之后我们解开一下进入这个它的目录我们可以看到有一个叫JMXCTM.SAC是这个脚本其实就是一个射脚本其实我们就能看到SAROR的射脚本是什么样的怎么去写的未来我们自己也可以去写一个包类级其实也非常简单那就不再看了这些东西那我们怎么去使用呢使用非常非常简单直接这样运行一下就可以当然我们如果不会的话就可以告H弹幕人有帮助信息他会告诉我们怎么安装先去安装或者是我们未来升级的话AppleGrid停止启动SAROR的停止还有RESTER的重启都可以非常简单那我们先去下载先去安装就是Install直接然后OK他会告诉我们是否支持FVV6其实这个套过程很简单我们直接吴脑默认回车都可以直接回车现在是不是给我们设开机自己动了因为他安装Dalker先去安装Dalker他是使用Dalker来去启动的所以他先给我们安装Dalker检查我们有没有Dalker环境拉去惊笑来直接去安装因为他还设计到一些RES还有其他的东西我们就安装的来等一下OK现在他会问我们我们要是把这个数据的这个数据的目录放在哪个地方呢就是我们JumpServer保累机的目录跟目录放在哪呢存放数据的目录不是跟目录当然我们一般都会用默认的或者我们自己去定义也可以默认直接回车就可以放在Data下面JumpServer回车然后配置数据库用什么样的数据库也是使用他默认的默认的就够了然后配置RESRES也是使用默认的直接使用RES就是默认的直接回车是不是配置这个外部访问的专口需要还是默认的就可以需要我们就Yes不需要就No就这么简单基本上我们默认就可以OK他现在正在出实化这个数据库我们就耐心地等一下就可以OK现在呢已经安装完了安装完了之后呢他还告诉我们一些提示信息怎么样去启动啊怎么样去关闭啊之类的怎么去充起啊然后呢怎么去访问现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢现在呢我们需要要去访问访问我们这个本地的IP它的801oding口就可以包括默认的用户名,以及密码都告诉我们非常简单那我们可以去看一看进这个包里机的状态是否正常就看是可以还是是用这个运行一下回车看一下这状态现在呢 它还没有开启我们可以我们现在让它打开这个包裂器我们开启一下我们可以 restart 或者是 start 都可以都可以 restart 也行对吧让它重挤一下都可以或者 start 也是开始开启这个我们的 jump-sower 包裂器那我们再简单地等一下就可以现在 start 状态对不对那我们再检查一下看一下 status 回车这时候是不是出现了非常非常多的这些东西 对不对其实这些东西都是 东西都是这个容器因为它是刀口部署的 对吧我们之前学过刀口的都知道这些东西是什么都是刀口容器只要是有这么多东西就说明我们已经启动成功了启动成功了那怎么去使用呢很简单按照它说的那种方法去访问就可以访问我们本地这个 ip 的 80 段口10.0.0.2580 段口现在是不是有的都办不见面啊 对不对这个就是它的外部 等一会儿它现在还在出实话有些见面还没有给我们出实话完成我们先简单的再等一下就ok了 再等一下再看一下我这个看上去出了点问题看一下 可能我内存给它少了不能两个几 四个几确实两个几还是不行 得四个几四个几先站完了那我就先给它点再给两个几我给它加了两个几现在四个几再连接一下再 apv  just我冲起一下嗯ok 冲几完了我再检查一下它的状态statusok 这时候我再看一下终于的内存rego h确实得给它四个几但我现在再看一下回彻以 刷新一下这时候就能登上了刚才还是给了内存太少了两个几就不行那我们现在就登录一下根据我们安装完之后给我们这些提示登录就可以它默认会给我们的一个管理员的账号密码和的密然后后面这个密码叫称之密这个默认的然后我们现在登录之后它会让我们自己改密码一点全任就可以修改一下密码修改复杂一点ok 修改完成然后我们再一次登录就可以了好了 现在已经登录上了然后现在我们就点这个同意然后点T交就可以ok 现在我们就进入到这个保累积的界面了目前我们所在的这个叫控制台控制台里面的这个1秒盘1秒盘能够看到今日有几个人在登录啊对不对包括用的哪些资产有没有资产目前现在我们没有加资产对不对所以说它是零看不到对不对还有一些在线的会话说啊当前会话说也就是当前连接的我们资产的连接资产的这个会话说有多少目前什么都没有对不对它还有一个统计活跃账号等等等等都可以看到还是比较好的那么我们现在有的保累积之后我们下一步就在这个保累积之后我们下一步就是要添加资产我们想一下我们是不是得通了保累积然后再去登录这个福祥对吧我们的生产环境了对不对所以说我们必须得把我们的一些福祥所有的福祥一些生产环境一些东西全都加到我们保累积里面这样才可以那我们举一个例子加一个怎么加呢这里面我们找到这个资产列表来到这个资产列表点这个创建就可以当然我们也可以点这个它们你是加Linux内型的还是其他的对不对它可以加的不仅仅是我们的福祥一些路由器交换机都可以去加包括我们福祥里面Linux WindowsWindows Server都可以去加中端所有东西基本都能够加你看主机网楼设备数据库云福祥都可以加到我的包围机里面所以说它的功能还是比较强大的那我们就加一个Linux点一下然后我们给它取一个名字对吧我想把我的这个7077这个福祥加到这里面就是这个吧一个77一个30多加到里面吧那我们就写上名字其他名叫K0777然后IP地址一定要写我们的7077的IP地址102002777然后这个节点现在只有一个默认的节点那么我们就现在选一个就可以其实就相当于它的目楼管理的一些不能说是管理的目楼相当于给它做一个分类差不多这个意思未来我们可以再加一些也就是这个地方这个就是我们资产数未来我们都是根据这些资产来创建相应的目楼把相同资产的放在一个目楼下面相同类型的资产我文字放在文字的里面就类似于这个意思那么现在我们继续往下这个协议组一定要写一下写一下这个协议组这个协议组呢其实是让我们的一个就是我们SFTPSFTP如果是SFTP的话,我们要写上SFTP的一些我们的默认端口它的端口好像是想来很旺,我们看一下而5211多少呢,5213,5213但我们也可以其他的方式认证都可以加上相应的服务端口就可以但是我们最好直接加上5213就可以然后这个MORN的就可以,SFH也可以,对吧这两个都可以那么我们下面就改创建一个帐号因为我们保诺机连接我们的7077这带服务器它是得通过帐号密码进行登录的当然也可以通过密耀进行登录,还都可以但是我们得给它增加一个形式,对不对添加一个比如说我让它以入它身份的运行对吧,连接时候直接连入它用当我们写上入它就可以它会自动给我护上用户名然后连接密码,我们是直接密码登录呢还是密耀登录呢都可以选密码呢,我们直接输入密码就可以密耀呢,我们输一些密耀文件密耀对尔文件把它放在这里面就可以非常简单那我们这边就演示一下密码就可以写上我们的密码,一定要是服务器入它用户的密码或者是相应的用户的密码都可以普通用户就有普通用户的密码入它用户就入它用户的密码这个地方可改密,就是说我们勾选上之后就是我们可以随时更改密码这个可以不够,对吧,让它更改当然我是方便演示,我就勾一下也行点缺任点缺任之后呢,我们其他的东西可以不用设置了可以不用设置,直接点提交OK,它现在是不是已经可以了天下上,但是连接是否可用呢我们得刷新一下才知道不行刷新只要是成功就说明没有问题连接失败呢,我们就要检测一下我们Linux 7077这台服务器,是不是正在开启如果这个服务器都没开启的话,那肯定连接失败对不对所以说得保证我们这个资产给开启才行当然我们可以再创建把那个三零也可以加到这里面对吧就是Killing三零然后IPD值三零接点呢,还是这个就可以这个2113其他的都一样了还是是有路子密码登录OK,然后就提交就完成然后我们再刷新一下刷新多刷新几次直到它有动就成功对吧成功那么现在我们就能就已经把资产先加到这里面了那听加到这里面了然后未来我们为了个安全旗舰我们会在这个Linux服务器今天听加一些安全策略天安压策略只能够谁去访问我的这个Linux谁能够远程连接我们Linux是不是我们只能够保累机这个IPD值才能够访问我们的Linux对不对所以说我们要加安全一些安全一些策略就要写上只能够保累机这代保累机10.0.0.0.0.0.0.0.5才能够远程连接我其他的都拒绝这样就非常安全了OK那么我们怎么去远程连接去使用呢怎么使用呢很简单拿这台7030来看我们点击一下这里面有账号对吧当然我现在只有一个账号然后还有一些授权其他的都有都有基本设置当然呢我们可以不用这样点点连接呢我可以直接从这首先连接之前呢我们先进行测试测试它是不是能够使用点击这个测试它会自动进行测试还知道OK就说明我们这个设备纳管成功没问题了连接也是没问题那下面呢我们就可以连接一下点击一下点主机也可以我也是全部也可以然后我们点开这个7030找到这个账号看到这个账号这个地方对吧我用路德用户登陆那么我就在路德这个点击这个数有点出现协议对不对然后SSS等路这时候我们是不是登陆上了对不对你看直接连接上了那么我们就可以输一些命令比如IOSIPADD2对吧我们进入OPT目楼下有吗IOS就是我可以创建一个这个文件PASS的文件都可以对吧用完之后我们直接就关闭就可以关闭这个就相当于连接爱就这个会化关闭掉了那么我们这个宝蕾机强大的地方不是在这它强大地方在哪呢还是在于它的神技功能非常强大我们可以看到这个地方有控制台对不对我们点开这个地方会看到我们进入可以进入神技台我们进入这个神技台里面可以看到会化记录点开一下在这里面我们就能看到有历史会化这一类点开我们就可以看到刚才我操作过哪台机器是不是都有记录对吧而在命用户曾经连接过这个7030人来服务器并且使用入它长好登陆远程连接而且它的实现也都给我我们记录对不对实现都没有问题那么它很强大的功能我们可以干啥呢直接点这个回放我们都可以看回放对吧这是它强大功能点一下它就以视频的形式回放出它刚才怎么操作呢你看进来时候我们是不是先敲LS包括IPA对吧或者我们做的什么东西都能够清清楚楚了看到所以这有它非常强大的地方当然呢我们也可以不看视频不看视频呢我们也可以看会化命令我们刚才对吧点开会化命令可以看到我们在这个哪台机器上培育的什么命令在7030在机局上是不是在纪念几分培育的LSIPACD到哪个地方啊都可以看到这就是它的强大的地方对吧谁连接过我们都能够记录哪个用户连接过什么时间执行过什么命令我们都可以看到非常强大这个地方就是当然还有一些其他功能比如我们可以传文件啊对吧都可以我们可以看登录日质等等等等我们都可以看到一些大家自己在研究研究就可以当然了我们未来了会还有非常多的需求还有一个常用的需求呢一般在企业中我们会经常用到就说我们运为人员是不是有非常多啊对不对那么我们是不是要要添加一些其他运为人员去管理这个其他运为人员的登录保累机的这些账号对不对因为我们现在是用保累机最高全线的这个账号登录对吧不可能让所有的用户都登录到我的这个管理员用户对吧那非常危险他想山会化就山会化想山资产山资产山处历史记录也非常简单的所以说这时候我们就可以添加普通用户并且为他授权可以管理的资产这个怎么听添加呢点这个用户列表点击这个创建创建一个用户创建什么呢用户名比如说这个PZ1当然这个名字名称我们可以自己取比如说这个员工医就吧员工医然后它的用户名用户名叫PZ1这个由相我们随便输入吧输入随便输入点由相QQ我们随便输入随便输入又可以当然在真实发现一下我们就尽量输入自己的真实的然后系统的角色呢我们给它起一个叫普通用户或者是这个就是授权是普通用户还是管理员还是审计员审计员只能看审计其实就是相当于三权杖号给它设置一下那我们点击普通用户就可以了其他的呢我看一下名称用户名也可以给它负有一个用户组也可以那么这个地方我们要给它设置一个密码还登录的密码要给它设置一下设置密码随便设置吧设置一个密码之后就OK了当然这里面也有一个下次登录需要修改密码我们可以取消它否则我们一会还得再修改一次密码对吧非常麻烦但这个密码也可以让它随机生成密码然后自动发送到这个就是我们可以让它重置密码然后发送到我们这个用户的游箱里面也是可以的那么OK还有密码失效的时间我们按等宝的要求其实可以给它按设置一些失效的时间都可以当然这里面我们可以不用再管了因为毕竟我们测试其他我们就不管了就直接提交OK提交完是不是出来一个用户啊现在只有这个用户时不可以的记住我们要给这个用户终于它相应的全线太行让它做什么的对吧得知道让它做什么那么应该怎么给它授权呢找到这个资产授权这个地方点击创建创建比如说叫生产部生产部一用户明给谁授权的给员工一叫PGY主播们没有分组我所谓给它加一个资产让它管理只能够管理比如说7077吧只能管理这一台主机然后结点呢还是点这个默认的就可以了然后照号对吧协议啊什么都可以当然这些我们不用变直接点提交就可以给它收完全了就说明我们这个生产部是由谁管呢是不是PGY这个员工PGY员工只能管这个生产部这个资产OK那么我们现在就登录一下登录我们可以再是点这个退出登录对吧点退出登录重新登录用普通员工登录RPGY点击这个登录这时候就登录好了然后点击这个统议OK了OK我们在这里面就可以看到普通员工的全线是不是和我们管理员的全线不一样啊对不对怎么可以看到呢首先我们这个地方只能够访问工作台对不对只能访问工作台相应的刚才我们是不是有三个帐号对不对我们也可以给它设置什么有一个叫神计帐号对不对神计帐号说是什么意思呢就是说我们只能够看到神计这个平台刚才其实我们也看到过神计那一软对不对我们也演示过了那我们神计帐号就是只能够做神计这个叫做三权杂号每个人的全线不一样那就类似于OK那我们就可以点击这个连接资产就可以看到我们可以管理的每个资产呢对吧可以管这个三零我好像是不是刚才把所有的都给它管的是不是好像没有给它设置全线还是我点错的我忘记了大家自己摸水一下就可以然后我们就可以点击对吧然后可以远上连接有什么SSS还是什么样都可以我就不再演示了不再演示了OK想文件传输文件管理也是可以的对吧可以上传一些文件都可以那么这个就是我们整个的保礼器项目的这个部署一个整个流程其实非常非常简单只不过我们一定要知道保礼器是做什么的怎么去添加资产未来我们经常在企业中操作的是什么也就是刚才我们的就是添加资产对吧添加资产然后添加普通用户给它设权让它管理哪些资产对吧都是这样的OK那么这些可我们就讲到这其他的我们大家自己可以在深度的研究一下这个
